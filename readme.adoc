:toc:

ifdef::env-github[]
image:https://github.com/kalemena/docker-node-red/workflows/Pipeline/badge.svg[GitHub Build]
image:https://img.shields.io/docker/v/kalemena/node-red[Docker Hub, link=https://hub.docker.com/r/kalemena/node-red/tags]
image:https://img.shields.io/docker/pulls/kalemena/node-red[Docker Hub, link=https://hub.docker.com/r/kalemena/node-red/tags]
image:https://img.shields.io/docker/image-size/kalemena/node-red[Docker Hub, link=https://hub.docker.com/r/kalemena/node-red/tags]
endif::[]

= Docker Node-Red

Packaged Node-Red for use in link:https://github.com/kalemena/ti-dhome[Ti-Dhome home automation project]

== How-To

=== Get Docker Image

.Pull Docker image from docker hub
[source,bash]
----
$ docker pull kalemena/node-red:latest
----

.Build Docker image locally
[source,bash]
----
$ make
----

=== Run Docker Image

.Run the image with docker-compose
* Edit docker-compose.yml for your purpose
* Run with opening 1880 port, and map your flows into /data directory.

[source,bash]
.docker-compose.yml
====
include::docker-compose.yml[]
====

.Environment variables and defaults:
* NODERED_FLOWS=/data/flows.json
* NODERED_SETTINGS=/home/nodered/.node-red/settings.js
* NODERED_USERDIR=/home/nodered/.node-red

.Start node-red
[source,bash]
----
$ make up
----

Now you can connect on *http://localhost:1880*

.Stop node-red (keeping volumes)
[source,bash]
----
$ make stop
----

.Remove node-red (and volumes)
[source,bash]
----
$ make down
----

== Examples

Examples from Node-Red libs are first steps to learn. +
Once started, go to burger menu at top-right, and *Import*, then select *Examples* and browse the basics block examples to import and test them.

TIP: Don't forget to click *Deploy* :-)

image:/docs/node-red-examples.png[]

See more link:examples[examples]
